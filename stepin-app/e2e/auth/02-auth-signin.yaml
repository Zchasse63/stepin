appId: com.stepin.app
---
# Test: User can sign in with existing credentials
# Priority: P0 - Critical
# Estimated time: 0.5 days

# Launch the app
- launchApp:
    clearState: true
- waitForAnimationToEnd

# Load the app from Expo Dev Launcher (development build only)
- tapOn: "http://localhost:8081"
- waitForAnimationToEnd

# Dismiss Expo Dev Menu popup if it appears
- tapOn:
    text: "Continue"
    optional: true
- waitForAnimationToEnd

# Close the Expo Dev Menu by tapping on the background (outside the menu)
- tapOn:
    point: "10%,20%"
    optional: true
- waitForAnimationToEnd

# Ensure we're signed out (handles persistent sessions in expo-secure-store)
- runFlow: ../helpers/ensure-signed-out.yaml

# Verify we're on the sign-in screen
- assertVisible: "Welcome Back"

# Fill in email
- assertVisible: "Email"
- tapOn: "Email"
- inputText: "test1@stepin.test"

# Fill in password
- tapOn: "Password"
- inputText: "TestPass123!"

# Submit sign in
- tapOn: "Sign In"

# Wait for authentication
- waitForAnimationToEnd

# Verify successful signin - should see main app screen (Today tab)
- assertVisible: "Today"

# Verify we're authenticated (not on welcome screen anymore)
- assertNotVisible: "Email"

